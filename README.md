# taroni: コマンドラインからGemini APIを最大限に活用するAIアシスタント

`taroni` は、Google Gemini APIをコマンドラインから強力に活用するためのAIアシスタントツールです。通常の対話型AIチャット機能に加え、ファイルの内容を読み込んだり、AIが自律的にコードを生成・修正する「AI開発エージェント」機能を提供し、開発者の生産性向上を支援します。

## 主な機能

### 1. 対話型AIチャット (Interactive Chat Mode)
AIと自然な会話をしながら、情報収集やアイデア出しを行うことができます。

-   **Google検索連携**: AIが回答生成のために必要と判断した場合、自動的にGoogle検索を実行し、最新かつ正確な情報を参照します。
-   **ファイル内容の埋め込み**: プロンプト内で `@ファイル名` と記述することで、指定したファイルの内容をAIに読み込ませて参照させることができます。これにより、特定のコードやドキュメントについてAIに質問したり、修正を依頼したりすることが容易になります。
-   **ファイルパス補完**: `@` に続けてファイルパスを入力する際に、Tabキーでファイルパスを補完できます。
-   **引用表示**: AIがGoogle検索や参照した情報源に基づいて回答した場合、その情報源への引用リンクを自動的に付与します。
-   **チャット履歴の永続化**: 対話履歴は自動的に保存され、次回起動時に引き継がれます。

### 2. AI開発エージェント (AI Development Agent)
ユーザーの開発指示に基づいて、AIが自律的にファイル変更計画を立案し、コードの生成・修正を行います。

-   **計画立案と承認**: ユーザーの指示を受け、AIが具体的なファイル変更計画（新規ファイルの作成、既存ファイルの上書きなど）を提案します。ユーザーはこの計画を確認し、承認または修正指示を出すことができます。
-   **コード生成・修正**: 承認された計画に基づき、AIが指定されたファイルの新しい内容を生成し、実際にファイルシステムに書き込みます。
-   **システムプロンプトのカスタマイズ**: プロジェクトルートまたはホームディレクトリに `TARONI.md` ファイルを配置することで、AIエージェントの振る舞いをカスタマイズするシステムプロンプトを設定できます。

## ターゲットユーザー

-   **ソフトウェア開発者**: コードの生成、リファクタリング、デバッグ支援など、日常の開発タスクをAIの力を借りて効率化したい方。
-   **研究者・学生**: プログラミング学習や研究プロジェクトで、AIを活用してアイデアを形にしたい方。
-   **AIアシスタントのヘビーユーザー**: コマンドラインからAIと深く連携し、より高度なタスクを自動化したい方。

## 使用方法

### インストール

```bash
pip install taroni
```

### APIキーの設定

`taroni` はGoogle Gemini APIを使用します。APIキーを環境変数 `GEMINI_API_KEY` に設定するか、プロジェクトルートの `.env` ファイルに `GEMINI_API_KEY=YOUR_API_KEY` の形式で記述してください。

### 1. ワンショットモード (One-shot Mode)

単一のプロンプトでAIに指示を与え、結果を受け取ります。主にエージェント機能を利用する際に使用します。

```bash
taroni "ログイン機能を追加して @app/views.py"
```

または、標準入力からプロンプトを渡すこともできます。

```bash
cat my_instruction.txt | taroni
```

### 2. 対話モード (Interactive Mode)

`taroni` コマンドを引数なしで実行すると、対話モードが開始されます。

```bash
taroni
```

-   **通常のチャット**: プロンプトを入力してAIと会話します。
-   **複数行入力**: [Ctrl+S] で入力を確定します。
-   **エージェントモードへの切り替え**: `/dev` または `/agent` に続けて開発指示を入力すると、AI開発エージェントが起動します。
    ```
    You: /dev ユーザー認証機能を実装して @app/models.py
    ```
-   **終了**: `exit` または `quit` と入力します。

### システムプロンプトのカスタマイズ

`taroni` は、以下の順序でシステムプロンプトファイルを探索し、AIの振る舞いを決定します。

1.  **コマンドライン引数**: `-S` または `--system` で直接指定されたプロンプトが最優先されます。
2.  **カレントディレクトリ**: 実行中のディレクトリに `TARONI.md` が存在する場合、それが使用されます。
3.  **ホームディレクトリ**: `~/.taroni/TARONI.md` が存在する場合、それが使用されます。

これにより、プロジェクト固有の要件や、個人的なAIのペルソナ設定を柔軟に行うことができます。

---